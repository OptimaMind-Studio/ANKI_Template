/* --- 1. 全局基础 --- */
.card {
    font-family: arial, "Microsoft YaHei", sans-serif;
    font-size: 26px;
    margin: 0;
    min-height: 100vh;
    background-color: #f6faf2; 
}

/* --- 2. 正面专用样式 --- */
.highlight-box {
    position: absolute;
    left: 50%;
    top: 45%;
    transform: translate(-50%, -50%);
    background-color: #fffde7; 
    border: 1px solid #f0f4c3;
    color: #2d5a27;            
    border-radius: 15px;
    padding: 30px 25px 15px 25px; 
    box-shadow: 0 8px 20px rgba(0,0,0,0.06);
    text-align: center;
    line-height: 1.2;
    min-width: 280px;
    max-width: 85vw;
    display: flex;
    flex-direction: column;
}

.field-red-tag {
    position: absolute;
    left: 12px;
    top: 8px;
    font-family: "KaiTi", "楷体", STKaiti, serif; 
    font-weight: bold;
    color: #d32f2f;
    font-size: 13px;
    opacity: 0.9;
}

/* 底部容器 */
.bottom-container {
    margin-top: 15px;
    display: flex;
    flex-direction: column;
    width: 100%;
}

/* 蓝色标签 */
.taxonomy-blue-tag {
    text-align: right; 
    align-self: flex-end; 
    font-family: "KaiTi", "楷体", STKaiti, serif; 
    font-weight: bold;
    color: #1976d2;
    font-size: 11px;
    opacity: 0.9;
    margin-bottom: 2px;
}

#source-tag-dynamic {
    font-family: "KaiTi", "楷体", STKaiti, serif; 
    font-weight: bold;
    color: #000000;
    font-size: 10px !important; 
    line-height: 1.2 !important;
    opacity: 0.5;
    text-align: center;      
    width: 100%;
    word-wrap: break-word;   
    margin-top: 4px;
}

/* --- 3. 背面布局 (Back Cornell) --- */
.cornell-layout {
    display: grid;
    grid-template-areas: "header header" "left right";
    grid-template-columns: 2fr 1fr; 
    width: 94%;
    max-width: 850px;
    margin: 20px auto;
    background-color: #ffffff; 
    border: 1px solid #dcedc8; 
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05);
    overflow: hidden;
}

/* 适配手机端：单列显示 */
@media screen and (max-width: 600px) {
    .cornell-layout {
        grid-template-areas: "header" "left" "right";
        grid-template-columns: 1fr;
    }
    .cornell-left { border-right: none; border-bottom: 1px solid #f0f4eb; }
    .cornell-right { min-height: auto !important; }
}

.cornell-header {
    grid-area: header;
    position: relative;
    background-color: #fffde7; 
    padding: 20px 15px 18px 15px;
    text-align: center;
    border-bottom: 1px solid #f0f4c3;
    color: #2d5a27;            
    font-weight: bold;
    font-size: 22px;
}

.cornell-left {
    grid-area: left;
    padding: 20px 15px;
    border-right: 1px solid #f0f4eb;
    text-align: left;
    font-size: 16px;
    color: #444;
    line-height: 1.6;
    overflow-x: auto; /* 允许横向溢出 */
}

.cornell-right {
    grid-area: right;
    padding: 20px 15px;
    background-color: #fffef9; 
    text-align: left;
    font-size: 13px;
    color: #555;
    line-height: 1.5;
    min-height: 80vh; 
    cursor: pointer;
    scroll-behavior: smooth;
    overflow-x: auto;
}

.cornell-right div, .cornell-right p {
    border-left: 2px solid #dcedc8; 
    padding-left: 8px;
    margin-bottom: 8px;
    cursor: default;
}

/* --- 核心表格修复 --- */
table { 
    border-collapse: collapse; 
    width: 100% !important; 
    margin: 15px 0; 
    table-layout: fixed; /* 强制固定布局，防止溢出 */
}

th, td { 
    border: 1px solid #ccc; 
    padding: 8px; 
    font-size: 14px; 
    line-height: 1.4;
    word-wrap: break-word; 
    word-break: break-all; /* 强制长英文/代码折行 */
    overflow-wrap: break-word;
    text-align: left;
}

th { background-color: #f8f9fa; font-weight: bold; color: #2d5a27; }

/* 目录 (Outline) 样式 */
.outline-content {
  max-height: 250px;
  overflow-y: auto;
  font-size: 13px;
  line-height: 1.5;
  margin-top: 5px;
}
.outline-item {
  display: block;
  padding: 3px 6px;
  color: #555;
  text-decoration: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  cursor: pointer;
  border-radius: 4px;
}
.outline-item:hover { background-color: #f0f0f0; color: #1976d2; }
.outline-h1 { font-weight: bold; font-size: 14px; }
.outline-h2 { margin-left: 12px; color: #666; }
.outline-h3 { margin-left: 24px; color: #888; font-size: 12px; }

.label {
    font-size: 10px;
    color: #a5b39b;
    font-weight: bold;
    display: block;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.custom-h3 {
    display: block;
    color: #1976d2;
    font-weight: bold;
    font-size: 16px;
    margin: 12px 0 0px 0;
}

.ai-content h1, .ai-content h2, .ai-content h3 { color: green !important; margin: 15px 0 10px 0; }
.ai-content p { margin-bottom: 10px; }